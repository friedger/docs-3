---
title: contract-of
description: Retrieving the principal of a contract implementing a trait in Clarity smart contracts.
---

## Function Signature

```clarity
(contract-of <trait-reference>)
```

- Input: A trait reference
- Output: The principal of the contract implementing the trait

## Why it matters

The `contract-of` function is crucial for:

1. Retrieving the principal (address) of a contract implementing a specific trait.
2. Enabling dynamic interactions with contracts based on traits.
3. Implementing contract-agnostic functions that work with any contract adhering to a specific interface.
4. Enhancing interoperability between contracts in a composable ecosystem.

## When to use it

Use the `contract-of` function when you need to:

- Get the actual contract address from a trait reference.
- Perform operations that require the contract's principal, such as authorization checks.
- Implement functions that can work with multiple contracts implementing the same trait.
- Debug or log information about which contract is being interacted with.

## Best Practices

- Use `contract-of` in combination with traits to create more flexible and composable smart contracts.
- Remember that `contract-of` returns a principal, which can be used in other Clarity functions expecting a contract address.
- Consider using `contract-of` when implementing proxy or router contracts that work with multiple similar contracts.
- Be aware that `contract-of` can only be used with trait references, not with direct contract references.

## Practical Example: Token Balance Checker

Let's implement a function that can check the balance of any token implementing a standard trait:

```clarity
(use-trait token-trait .token-trait.token-trait)

(define-public (check-balance (user principal) (token <token-trait>))
  (let ((token-contract (contract-of token)))
    (print (concat "Checking balance in contract: " (to-ascii (serialize-principal token-contract))))
    (contract-call? token get-balance user)))

;; Usage
(check-balance tx-sender .my-token-contract)
```

This example demonstrates:
1. Using `contract-of` to get the principal of the contract implementing the token trait.
2. Printing the contract address for debugging purposes.
3. Using the retrieved contract principal in a `contract-call?` to interact with the token contract.

## Common Pitfalls

1. Attempting to use `contract-of` with a direct contract reference instead of a trait reference.
2. Forgetting that `contract-of` returns a principal, not a contract reference itself.
3. Not handling potential errors when working with trait references that might not be properly initialized.

## Related Functions

- `use-trait`: Used to define trait references that can be used with `contract-of`.
- `contract-call?`: Often used in combination with `contract-of` to call functions on the retrieved contract.
- `is-eq`: Can be used to compare the returned principal with known contract addresses.

## Conclusion

The `contract-of` function is a powerful tool for creating flexible and interoperable smart contracts in Clarity. By allowing contracts to dynamically retrieve the principal of trait-implementing contracts, it enables the creation of more generic and reusable code. When used effectively, `contract-of` can significantly enhance the composability and modularity of your smart contract ecosystem.
