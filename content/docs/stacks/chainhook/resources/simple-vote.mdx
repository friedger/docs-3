---
title: Simple Vote Contract
description: Contract for tracking votes.
toc: false
---

```clarity
;; title: simple-vote
;; version: 1
;; summary: Simple voting contract
;; description: Voting contract with print returns for testing contract-call

;;constants
(define-constant ERR_ALREADY_VOTED u100)

;;data variables
(define-data-var VoteCount uint u0)

;;data maps
(define-map UserVotes principal { hasVoted: bool })

;;public functions
(define-public (cast-vote)
  (begin
    ;; Check if the voter has already voted.
    (asserts! (is-none (map-get? UserVotes tx-sender)) (err ERR_ALREADY_VOTED))

    ;; Update the map that the vote has been cast.  Print vote related data.
    (map-set UserVotes tx-sender { hasVoted: true })
    (var-set VoteCount (+ (var-get VoteCount) u1))
    (print
      {
        notification: "cast-vote",
        payload: {
          status: "Has voted set to true",
          voter: tx-sender,
          totalVotes: (get-total-votes)
        }
      }
    )
    (ok "Vote cast successfully")
  )
)

(define-public (call-cast-vote)
  (cast-vote)
)

;;read-only functions
(define-read-only (has-voted (voter principal))
  (is-some (map-get? UserVotes voter))
)

(define-read-only (get-vote (voter principal))
  (map-get? UserVotes voter)
)

(define-read-only (get-total-votes)
  (var-get VoteCount)
)
```
